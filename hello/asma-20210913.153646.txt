ASMA Ver. 0.2.1                                                                                     13 Sep 2021 15:36:46  Page     1

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

                                               1 * Copyright 2021 Harold Grovesteen
                                               2 *
                                               3 * MIT License:
                                               4 *
                                               5 * Permission is hereby granted, free of charge, to any person obtaining a copy
                                               6 * of this software and associated documentation files (the "Software"), to deal
                                               7 * in the Software without restriction, including without limitation the rights
                                               8 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                                               9 * copies of the Software, and to permit persons to whom the Software is
                                              10 * furnished to do so, subject to the following conditions:
                                              11 *
                                              12 * The above copyright notice and this permission notice shall be included in
                                              13 * all copies or substantial portions of the Software.
                                              14 *
                                              15 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                                              16 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                                              17 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                                              18 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                              19 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                                              20 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
                                              21 * THE SOFTWARE.
                                              22
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     2

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

                                              24 * Program Description:
                                              25 *
                                              26 * HELLO is a bare-metal 'Hello World' program.  It requires input/output
                                              27 * commands to the console device to issue the message.  The program is
                                              28 * executed by means of an IPL from a card deck.
                                              29 *
                                              30 * Target Architecture: S/360
                                              31 *
                                              32 * Devices Used:
                                              33 *   00C - IPL card reader
                                              34 *   01F - Console device
                                              35 *
                                              36 * Program Register Usage:
                                              37 *
                                              38 *   R0   Base register for access to the ASA.  Required by DSECT usage
                                              39 *   R1   Device Channel and Unit Address for I/O instructions
                                              40 *   R12  The program base register
                                              41 *
                                              42 * Disabled Wait State PSW's address field values used by the program:
                                              43 *    X'000000' - Successful execution of the program
                                              44 *    X'000008' - Unexpected Restart interruption occurred. Old Restart PSW at
                                              45 *                address X'8'
                                              46 *    X'000018' - Unexpected External interruption occurred.  Old External PSW at
                                              47 *                address X'18'
                                              48 *    X'000020' - Unexpected Supervisor interruption occurred.  Old Supervisor
                                              49 *                PSW at address X'20'
                                              50 *    X'000028' - Unexpected Program interruption occurred. Old Program PSW at
                                              51 *                address X'28'
                                              52 *    X'000030' - Unexpected Machine Check interruption occurred.  Old Machine
                                              53 *                Check PSW at address X'30'
                                              54 *    X'000038' - Unexpected Input/Output interruption occurred.  Old Input/Output
                                              55 *                PSW at address X'38'
                                              56 *    X'010004' - Console Device X'00F' or channel not operational
                                              57 *    X'010008' - Console Device X'00F' or channel busy
                                              58 *    X'01000C' - Console Device X'00F' or channel had a problem. See CSW.
                                              59 *    X'010010' - Unexpected interruption from some other device. See ASA X'BA'
                                              60 *    X'010014' - Console channel error occurred
                                              61 *    X'010018' - Console device did not complete the I/O without a problem
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     3

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

                                              63 * See all object data and macro generated model statements in the listing
                                              64          PRINT DATA,GEN

                                              66 * Inform the SATK macros of the architecture being targeted.  Inferred from
                                              67 * the ASMA -t command-line argument.
                                              68          ARCHLVL
                                              70+$AL      OPSYN AL
                                              71+$ALR     OPSYN ALR
                                              72+$B       OPSYN B
                                              73+$BC      OPSYN BC
                                              74+$BCTR    OPSYN BCTR
                                              75+$BE      OPSYN BE
                                              76+$BH      OPSYN BH
                                              77+$BL      OPSYN BL
                                              78+$BM      OPSYN BM
                                              79+$BNE     OPSYN BNE
                                              80+$BNH     OPSYN BNH
                                              81+$BNL     OPSYN BNL
                                              82+$BNM     OPSYN BNM
                                              83+$BNO     OPSYN BNO
                                              84+$BNP     OPSYN BNP
                                              85+$BNZ     OPSYN BNZ
                                              86+$BO      OPSYN BO
                                              87+$BP      OPSYN BP
                                              88+$BXLE    OPSYN BXLE
                                              89+$BZ      OPSYN BZ
                                              90+$CH      OPSYN CH
                                              91+$CLR     OPSYN CLR
                                              92+$L       OPSYN L
                                              93+$LH      OPSYN LH
                                              94+$LM      OPSYN LM
                                              95+$LNR     OPSYN LNR
                                              96+$LPSW    OPSYN LPSW
                                              97+$LR      OPSYN LR
                                              98+$LTR     OPSYN LTR
                                              99+$NR      OPSYN NR
                                             100+$SL      OPSYN SL
                                             101+$SLR     OPSYN SLR
                                             102+$SR      OPSYN SR
                                             103+$ST      OPSYN ST
                                             104+$STM     OPSYN STM
                                             105+$X       OPSYN X
                                             106+$BAS     OPSYN BAL
                                             107+$BASR    OPSYN BALR
                                             108+         MNOTE *,'ARCHLVL - ARCHITECTURE LEVEL SET - 1'
        ** [108] MNOTE *,ARCHLVL - ARCHITECTURE LEVEL SET - 1
                                             109 * Ensure interrupt traps are loaded by iplasma.py before program execution
                                             110 * begins.  This macro will create the memory region that will also contain
                                             111 * the IPL PSW.  The region name defaults to ASAREGN.  iplasma.py knows how
                                             112 * to deal with this situation.
                                             113 ASASECT  ASALOAD
                            000000  0001FF   114+ASASECT  START 0,ASAREGN
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     4

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

000000  00020000 00000008                    116+         PSW   0,0,2,0,X'008'      64-bit Restart ISR Trap New PSW
000008                      000008  000058   117+         ORG   ASASECT+X'058'
000058  00020000 00000018                    119+         PSW   0,0,2,0,X'018'      64-bit External ISR Trap New PSW
000060  00020000 00000020                    120+         PSW   0,0,2,0,X'020'      64-bit Supervisor Call ISR Trap New PSW
000068  00020000 00000028                    121+         PSW   0,0,2,0,X'028'      64-bit Program ISR Trap New PSW
000070  00020000 00000030                    122+         PSW   0,0,2,0,X'030'      64-bit Machine Check Trap New PSW
000078  00020000 00000038                    123+         PSW   0,0,2,0,X'038'      64-bit Input/Output Trap New PSW
000080                      000080  000200   124+         ORG   ASASECT+512
                                             125          ASAIPL IA=PGMSTART    Define the bare-metal program's IPL PSW
                            000000  0001FF   126+ASASECT  CSECT
000200                      000200  000000   127+         ORG   ASASECT
000000  00000000 00002000                    128+         PSW   0,0,0,0,PGMSTART,24
000008                      000008  000200   129+         ORG   ASASECT+512      Reset CSECT to end of assigned storage area
                            000000  0001FF   130+ASASECT  CSECT


                                             132 *
                                             133 * The Bare-Metal Hello World Program
                                             134 *

                            002000  002107   136 PGMSECT  START X'2000',HELLO   Start a second region for the program itself
                                             137 * This results in HELLO.bin being created in the list directed IPL directory
002000                      000000           138          USING ASA,0           Give me instruction access to the ASA CSECT
002000  05C0                                 139 PGMSTART BALR  12,0            Establish my base register
002002                      002002           140          USING *,12            Tell the assembler

                                             142 * Ensure program is not re-entered by a Hercules console initiated restart.
                                             143 * Address 0 changed from its absolute storage role (IPL PSW) to its real
                                             144 * storage role (Restart New PSW) after the IPL.
                                             145 * Change from the IPL PSW at address 0 to Restart New PSW trap
002002  D207 0000 C0AE      000000  0020B0   146          MVC   RSTNPSW,PGMRS

                                             148 * Determine if the device, subchannel and channel are ready for use.
002008  4810 C08A                   00208C   149          LH    1,CONDEV    Set up I/O device address in I/O instruction register
00200C  9D00 1000                   000000   150          TIO   0(1)        Determine if the console is there
002010  4740 C06A                   00206C   151          BC    B'0100',DEVNOAVL  ..No, CC=1 might have a different config address
002014  4720 C06E                   002070   152          BC    B'0010',DEVBUSY   ..No, CC=2 console device or channel is busy
002018  4710 C072                   002074   153          BC    B'0001',DEVCSW    ..No, CC=3 CSW stored in ASA at X'40'
                                             154 * Console device is available (CC=0)!

                                             156 * Prepare for I/O to console
00201C  D207 0048 C086              002088   157          MVC   CAW(8),CCWADDR    Identify in ASA where first CCW resides

                                             159 * Send the Hello World message to the console
002022  9C00 1000                   000000   160          SIO   0(1)        Request console channel program to start, did it?
002026  4740 C06A                   00206C   161          BC    B'0100',DEVNOAVL  ..No, CC=1 don't know why, but tell someone.
00202A  4720 C06E                   002070   162          BC    B'0010',DEVBUSY   ..No, CC=2 console device or channel is busy
00202E  4710 C072                   002074   163          BC    B'0001',DEVCSW    ..No, CC=3 CSW stored in ASA at X'40'
                                             164 * Console device is now receiving the message (CC=0)

                                             166 * Wait for an I/O interruption
002032  D207 0078 C0BE              0020C0   167 DOWAIT   MVC   IONPSW(8),CONT  Set up continuation PSW for after I/O interrupt
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     5

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

002038  8200 C0B6                   0020B8   168          LPSW  WAIT       Wait for I/O interruption and CSW from channel
                            00203C  000001   169 IODONE   EQU   *          The bare-metal program continues here after I/O
00203C  D207 0078 C0C6              0020C8   170          MVC   IONPSW(8),IOTRAP     Restore I/O trap PSW

                                             172 * I/O results can now be checked.
                                             173 *   Did the interruption come from the console device?
002042  4910 003A                   00003A   174          CH    1,IOOPSW+2          Is the interrupt from the console?
002046  4770 C076                   002078   175          BNE   DEVUNKN             ..No, end program with an error
                                             176 *   Yes, check the CSW conditions to determine if the I/O worked
00204A  D601 C08C 0044      00208E  000044   177          OC    STATUS,CSW+4        Accummulate Device and Channel status
002050  9500 C08D                   00208F   178          CLI   STATUS+1,X'00'      Did the channel have, a problem?
002054  4770 C07A                   00207C   179          BNE   CHNLERR             ..Yes, end with a channel error
002058  91F3 C08C                   00208E   180          TM    STATUS,X'F3'        Did the unit encounnter a problem?
00205C  4770 C07E                   002080   181          BNZ   UNITERR             ..No, end with a unit error
002060  910C C08C                   00208E   182          TM    STATUS,X'0C'        Did both channel and unit end?
002064  47E0 C030                   002032   183          BNO   DOWAIT              Wait again for both to be done
                                             184 * Both channel and unit have ended

                                             186 * HURRAY!  Program 3 delivered its Hello World message!
002068  8200 C0CE                   0020D0   187          LPSW  DONE      Normal program termination

                                             189 * End the bare-metal program with an error indicated in PSW
00206C  8200 C0D6                   0020D8   190 DEVNOAVL LPSW  NODEV     Code 004 End console device is not available
002070  8200 C0DE                   0020E0   191 DEVBUSY  LPSW  BUSYDEV   Code 008 End because device is busy (no wait)
002074  8200 C0E6                   0020E8   192 DEVCSW   LPSW  CSWSTR    Code 00C End because CSW stored in ASA
002078  8200 C0EE                   0020F0   193 DEVUNKN  LPSW  NOTCON    Code 010 End unexpected device caused I/O interruption
00207C  8200 C0F6                   0020F8   194 CHNLERR  LPSW  CHERROR   Code 014 End because console channel error occurred
002080  8200 C0FE                   002100   195 UNITERR  LPSW  DVERROR   Code 018 End because console device error occurred

                                             197 * Control Register 2 - Enables channels for interruptions
002084  80000000                             198 CR2      DC    XL4'80000000'  Enable only channel 0 where console is connected

                                             200 * I/O related information
002088  00002090                             201 CCWADDR  DC    A(CONCCW) Address of first CCW to be executed by console device.
00208C  001F                                 202 CONDEV   DC    XL2'001F'   Console device address
00208E  0000                                 203 STATUS   DC    XL2'0000'   Used to accumulate unit and channel status

                                             205 * CCW used by the program to write the Hello World message
002090  09002098 00000017                    206 CONCCW   CCW0  X'09',MESSAGE,0,MSSGLEN      Write Hello World message with CR
                                             207 *         CCW0  X'03',0,0,1                   ..then a NOP.
                                             208 * If the preceding NOP CCW command is enabled, then the CONCCW must set
                                             209 * command chaining in the flag byte, setting the third operand to X'40'
002098  C8859393 9640C281                    210 MESSAGE  DC    C'Hello Bare-Metal World!'   Data sent to console device
0020A0  998560D4 85A38193
0020A8  40E69699 93845A
                            000017  000001   211 MSSGLEN  EQU   *-MESSAGE                    Length of Hello World text data

                                             213 * PSW's used by the bare-metal program
                                             214 PGMRS    DWAIT CODE=008     Restart New PSW trap.  Points to Restart Old PSW
0020B0  00020000 00010008                    215+PGMRS    PSW   0,0,2,0,X'010008'
0020B8  80020000 00000000                    216 WAIT     PSW360 X'80',0,2,0,0    Causes CPU to wait for I/O interruption
0020C0  00000000 0000203C                    217 CONT     PSW360 0,0,0,0,IODONE   Causes the CPU to continue after waiting
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     6

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

0020C8  00020000 00000038                    218 IOTRAP   PSW360 0,0,2,0,X'38'    I/O trap New PSW (restored after I/O)

                                             220 * PSW's terminating program execution
                                             221 DONE     DWAITEND              Successful execution of the program
0020D0  00020000 00000000                    223+DONE     PSW   0,0,2,0,X'000000'
                                             224 NODEV    DWAIT PGM=01,CMP=0,CODE=004  Console device not available
0020D8  00020000 00010004                    225+NODEV    PSW   0,0,2,0,X'010004'
                                             226 BUSYDEV  DWAIT PGM=01,CMP=0,CODE=008  Console device busy
0020E0  00020000 00010008                    227+BUSYDEV  PSW   0,0,2,0,X'010008'
                                             228 CSWSTR   DWAIT PGM=01,CMP=0,CODE=00C  CSW stored in ASA
0020E8  00020000 0001000C                    229+CSWSTR   PSW   0,0,2,0,X'01000C'
                                             230 NOTCON   DWAIT PGM=01,CMP=0,CODE=010  Unexpected interruption from other device
0020F0  00020000 00010010                    231+NOTCON   PSW   0,0,2,0,X'010010'
                                             232 CHERROR  DWAIT PGM=01,CMP=0,CODE=014  Console channel error occurred
0020F8  00020000 00010014                    233+CHERROR  PSW   0,0,2,0,X'010014'
                                             234 DVERROR  DWAIT PGM=01,CMP=0,CODE=018  Console device error occurred
002100  00020000 00010018                    235+DVERROR  PSW   0,0,2,0,X'010018'



                                             237 *
                                             238 * Hardware Assigned Storage Locations
                                             239 *

                                             241 * This DSECT allows symbolic access to these locations.  The DSECT created is
                                             242 * named ASA.
                                             243 ASA      ASAREA DSECT=YES
                                             244+ASA      DSECT
                            000000  000001   245+ASBEGIN  EQU   *                   Start of absolute/real assigned storage areas
000000  00000000 00000000                    246+IPLPSW   DC    FD'0'        000 A  Initial Program Load Program Status Word
000008  00000000 00000000                    247+IPLCCW1  DC    FD'0'        008 A  Initial Program Load first Channel Command Word
000010  00000000 00000000                    248+IPLCCW2  DC    FD'0'        010 A  Initial program Load second Channel Command Word
                                             249+* RESTART RELATED PROGRAM STATUS WORDS
000018                      000018  000000   250+         ORG   ASBEGIN
000000  00000000 00000000                    251+RSTNPSW  DC    FD'0'        000 R  Restart New PSW
000008  00000000 00000000                    252+RSTOPSW  DC    FD'0'        008 R  Restart Old PSW
000010  00000000 00000000                    253+UA0      DC    FD'0'        010 R  Unassigned Area 0
                                             254+* INTERRUPTION OLD PROGRAM STATUS WORD SAVE AREAS
000018  00000000 00000000                    255+EXTOPSW  DC    FD'0'        018 R  External Interrupt Old PSW
000020  00000000 00000000                    256+SVCOPSW  DC    FD'0'        020 R  Supervisor Call Old PSW
000028  00000000 00000000                    257+PGMOPSW  DC    FD'0'        028 R  Program Old PSW
000030  00000000 00000000                    258+MCKOPSW  DC    FD'0'        030 R  Machine Check Old PSW
000038  00000000 00000000                    259+IOOPSW   DC    FD'0'        038 R  Input/Output Old PSW
                                             260+* System/360 or System/370 Basic Control Mode INTERRUPTION INFORMATION
000040                      000040  00001A   261+         ORG   EXTOPSW+2
00001A  0000                                 262+BCEXTCOD DC    H'0'         01A R  External Interuption Code
00001C                      00001C  000022   263+         ORG   SVCOPSW+2
000022  0000                                 264+BCSVCCOD DC    H'00'        022 R  Supervisor Call Interruption Code
000024                      000024  00002A   265+         ORG   PGMOPSW+2
00002A  0000                                 266+BCPGMCOD DC    H'0'         02A R  Program Interruption Code
00002C                      00002C  000032   267+         ORG   MCKOPSW+2
000032  0000                                 268+BCMCKCOD DC    H'0'         032 R  Machine Check Interruption Code
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     7

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

000034                      000034  00003A   269+         ORG   IOOPSW+2
00003A  0000                                 270+BCIOCOD  DC    H'0'         03A R  Input/Output Interruption Code (Device CCUU)
00003C                      00003C  000040   271+         ORG   *+4
                                             272+* CHANNEL-BASED INPUT/OUTPUT INTERRUPT RELATED
000040  00000000 00000000                    273+CSW      DC    FD'0'        040 R  Channel Status Word
000048                                       274+CAW      DC    0F'0'        048 R  Channel Address Word
000048  00                                   275+CAWKEY   DC    X'00'        048 R  Channel Storage Key (bits 0-3)
                            000008  000001   276+CAWSUSP  EQU   X'08'        048 R  Suspend Control (bit 4)
000049  000000                               277+CAWADDR  DC    AL3(0)       049 R  Channel Command Address
00004C  00000000                             278+UA1      DC    F'0'         04C R  Unassigend Area 1
                                             279+* MISCELANEOUS AREAS
000050  00000000                             280+TIMER    DC    F'0'         050 R  System/360 and System/370 Interval Timer
000054  00000000                             281+TTDES    DC    F'0'         054 R  System/370 Trace-Table-Designation
                                             282+* INTERRUPTION NEW PROGRAM STATUS WORD AREAS
000058                      000058  000058   283+         ORG   ASBEGIN+X'58'
000058  00000000 00000000                    284+EXTNPSW  DC    FD'0'        058 R  External New PSW
000060  00000000 00000000                    285+SVCNPSW  DC    FD'0'        060 R  Supervisor Call New PSW
000068  00000000 00000000                    286+PGMNPSW  DC    FD'0'        068 R  Program New PSW
000070  00000000 00000000                    287+MCKNPSW  DC    FD'0'        070 R  Machine Check New PSW
000078  00000000 00000000                    288+IONPSW   DC    FD'0'        078 R  Input/Output New PSW
                                             289+* System/360 Diagnostic Scanout Area
000080                                       290+SCANOUT  DS    0X           080 A  System/360 Diagnostic Scanout Area
                            000000  000001   291+SCANOUTL EQU   *-SCANOUT           System/360 Diagnostic Scanout Area Length
                                             292+* EXTERNAL INTERRUPTION INFORMATION
000080                      000080  000080   293+         ORG   ASBEGIN+X'80'
000080  00000000                             294+EXTIPARM DC    F'0'         080 R  External-interruption Parameter
000084  0000                                 295+EXTCPUAD DC    H'0'         084 R  External-interruption CPU Address
000086  0000                                 296+EXTICODE DC    H'0'         086 R  External-interruption Code
                                             297+* SUPERVISOR CALL INTERRUPTION INFORMATION
000088                                       298+SVCIID   DC    0F'0'        088 R  Supervisor-Call Interuption Identification
000088  00                                   299+         DC    X'00'        088 R  not-used - zeros stored
000089  00                                   300+SVCIILC  DC    X'00'        089 R  Supervisor-Call instruction length code
                            00000C  000001   301+SVCIILCM EQU   B'00001100'         Supervisor-Call ILC mask, zeros stored in other bits
00008A  0000                                 302+SVCICODE DC    H'0'         08A R  Supervisor-Call Interruption Code
                                             303+* PROGRAM INTERRUPTION INFORMATION
00008C                                       304+PGMIID   DC    0F'0'        08C R  Program-interruption identification
00008C  00                                   305+         DC    X'00'        08C R  not-used - zeros stored
00008D  00                                   306+PGMIILC  DC    X'00'        08D R  Program instruction lengh code
                            00000C  000001   307+PGMIILCM EQU   B'00001100'         Progrtam ILC mask, zeros stored in other bits
00008E  0000                                 308+PGMICODE DC    H'0'         08E R  Program Interruption Code
000090                                       309+PGMDXC   DC    0F'0'        090 R  Data-Exception Code
000090  00000000                             310+PGMTRX   DC    F'0'         090 R  Translation-Exception Identification
000094                                       311+MONCLS   DC    0H'0'        094 R  Monitor-Class Number
000094  00                                   312+         DC    X'00'        094 R  not-used - zeros stored
000095  00                                   313+MONNUMBR DC    X'00'        095 R  Monitor-Class Number stored
000096  00                                   314+PERCODE  DC    X'00'        096 R  Program-Event-Recording Code
                            0000F0  000001   315+PERCODMK EQU   B'11110000'         Program-Event-Recordind Code mask in bits 0-3
000097  00                                   316+         DC    X'00'        097 R  PER Code not used - zeros stored
000098  00000000                             317+PERADDR  DC    F'0'         098 R  PER Address
00009C  00000000                             318+MONCODE  DC    F'0'         09C R  Monitor Event Code in bytes 1-3, zeros in byte 0
0000A0  00                                   319+PGMACCID DC    X'00'        0A0 R  Exception access identification
0000A1  00                                   320+PERACCID DC    X'00'        0A1 R  PER access identification
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     8

 LOC       OBJECT CODE      ADDR1   ADDR2   STMT

0000A2  00                                   321+MPGACCID DC    X'00'        0A2 R  MOVE PAGE Operand access identification
0000A3                                       322+SSARCHMD DC    0X'00'       0A3 A  Store Status Architectural Mode Identification
0000A3  00                                   323+MKARCHMD DC    X'00'        0A3 R  Machine-Check Architectural Mode Identification
0000A4  00000000                             324+UA2      DC    F'0'         0A4 R  Unused area
                                             325+* System/370 CHANNEL INPUT/OUTPUT INFORMATION
0000A8                      0000A8  0000A8   326+         ORG   ASBEGIN+X'A8'
0000A8  00000000                             327+CHANID   DC    F'0'         0A8 R  System/370 STORE CHANNEL ID location
0000AC  00000000                             328+IOELADDR DC    F'0'         0AC R  System/370 I/O Extended Logout Address
0000B0  00000000                             329+LCHANLOG DC    F'0'         0B0 R  System/370 Limited Channel Logout Area
0000B4  00000000                             330+UA3      DC    F'0'         0B4 R  unused by System/370
0000B8  00                                   331+UA4      DC    X'00'        0B8 R  unused by System/370
0000B9  00                                   332+MEASUREB DC    X'00'        0B9 R  System/370 Measurement Byte
0000BA  0000                                 333+IOICODE  DC    H'0'         0BA R  System/370 Input/Output Interruption Device Address
                                             334+* MACHINE-CHECK INTERRUPTION INFORMATION
0000BC                      0000BC  0000D4   335+         ORG   ASBEGIN+X'D4'
0000D4  00000000                             336+MKXSAA   DC    F'0'         0D4 R  Machine-Check Extended Save Area Address
0000D8  00000000 00000000                    337+MKCPUTIM DC    FD'0'        0D8 R  Machine-Check CPU timer save area
0000E0  00000000 00000000                    338+MKCLKCMP DC    FD'0'        0E0 R  Machine-Check clock comparator save area
0000E8  00000000                             339+MKICODE  DC    F'0'         0E8 R  Machine-Check interruption code
0000EC  00000000 00000000                    340+UA6      DC    XL8'00'      0EC R  unused area
0000F4  00000000                             341+MKDMGCOD DC    F'0'         0F4 R  Machine-Check external damage code
0000F8                                       342+ZMKFAILA DC    0FD'0'       0F8 R  Machine-Check failing storage address
0000F8  00000000                             343+MKFAILA  DC    F'0'         0F8 R  Machine-Check failing storage address
0000FC  00000000                             344+MKMODEL  DC    F'0'         0FC R  Machine-Check model dependent information
000100  00000000 00000000                    345+MKLOGOUT DC    4F'0'        100 R  ESA machine-check fixed logout area
000108  00000000 00000000
000110                      000110  000120   346+         ORG   ASBEGIN+X'120'
000120  00000000 00000000                    347+MKARS    DC    16F'0'       120 R  Machine-Check access register save area
000128  00000000 00000000
000130  00000000 00000000
000138  00000000 00000000
000140  00000000 00000000
000148  00000000 00000000
000150  00000000 00000000
000158  00000000 00000000
                            000160  000001   348+ASEND    EQU   *                   End of absolute/real assigned storage areas
                            000160  000001   349+ASLENGTH EQU   ASEND-ASBEGIN       Length of absolute/real assigned storage area
                                             350          END
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page     9

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

ASA                 4    000000     352   244  138
ASAREGN             2    000000     512   114
ASASECT             J    000000     512   114  117  124  127  129
ASBEGIN             U    000000       1   245  250  283  293  326  335  346  349
ASEND               U    000160       1   348  349
ASLENGTH            U    000160       1   349
BCEXTCOD            H    00001A       2   262
BCIOCOD             H    00003A       2   270
BCMCKCOD            H    000032       2   268
BCPGMCOD            H    00002A       2   266
BCSVCCOD            H    000022       2   264
BUSYDEV             3    0020E0       8   227  191
CAW                 F    000048       4   274  157
CAWADDR             R    000049       3   277
CAWKEY              X    000048       1   275
CAWSUSP             U    000008       1   276
CCWADDR             A    002088       4   201  157
CHANID              F    0000A8       4   327
CHERROR             3    0020F8       8   233  194
CHNLERR             I    00207C       4   194  179
CONCCW              W    002090       8   206  201
CONDEV              X    00208C       2   202  149
CONT                3    0020C0       8   217  167
CR2                 X    002084       4   198
CSW                 F    000040       8   273  177
CSWSTR              3    0020E8       8   229  192
DEVBUSY             I    002070       4   191  152  162
DEVCSW              I    002074       4   192  153  163
DEVNOAVL            I    00206C       4   190  151  161
DEVUNKN             I    002078       4   193  175
DONE                3    0020D0       8   223  187
DOWAIT              I    002032       6   167  183
DVERROR             3    002100       8   235  195
EXTCPUAD            H    000084       2   295
EXTICODE            H    000086       2   296
EXTIPARM            F    000080       4   294
EXTNPSW             F    000058       8   284
EXTOPSW             F    000018       8   255  261
HELLO               2    002000     264   136
IMAGE               1    000000     776     0
IODONE              U    00203C       1   169  217
IOELADDR            F    0000AC       4   328
IOICODE             H    0000BA       2   333
IONPSW              F    000078       8   288  167  170
IOOPSW              F    000038       8   259  269  174
IOTRAP              3    0020C8       8   218  170
IPLCCW1             F    000008       8   247
IPLCCW2             F    000010       8   248
IPLPSW              F    000000       8   246
LCHANLOG            F    0000B0       4   329
MCKNPSW             F    000070       8   287
MCKOPSW             F    000030       8   258  267
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page    10

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

MEASUREB            X    0000B9       1   332
MESSAGE             C    002098      23   210  211  206
MKARCHMD            X    0000A3       1   323
MKARS               F    000120       4   347
MKCLKCMP            F    0000E0       8   338
MKCPUTIM            F    0000D8       8   337
MKDMGCOD            F    0000F4       4   341
MKFAILA             F    0000F8       4   343
MKICODE             F    0000E8       4   339
MKLOGOUT            F    000100       4   345
MKMODEL             F    0000FC       4   344
MKXSAA              F    0000D4       4   336
MONCLS              H    000094       2   311
MONCODE             F    00009C       4   318
MONNUMBR            X    000095       1   313
MPGACCID            X    0000A2       1   321
MSSGLEN             U    000017       1   211  206
NODEV               3    0020D8       8   225  190
NOTCON              3    0020F0       8   231  193
PERACCID            X    0000A1       1   320
PERADDR             F    000098       4   317
PERCODE             X    000096       1   314
PERCODMK            U    0000F0       1   315
PGMACCID            X    0000A0       1   319
PGMDXC              F    000090       4   309
PGMICODE            H    00008E       2   308
PGMIID              F    00008C       4   304
PGMIILC             X    00008D       1   306
PGMIILCM            U    00000C       1   307
PGMNPSW             F    000068       8   286
PGMOPSW             F    000028       8   257  265
PGMRS               3    0020B0       8   215  146
PGMSECT             J    002000     264   136
PGMSTART            I    002000       2   139  128
PGMTRX              F    000090       4   310
RSTNPSW             F    000000       8   251  146
RSTOPSW             F    000008       8   252
SCANOUT             X    000080       1   290  291
SCANOUTL            U    000000       1   291
SSARCHMD            X    0000A3       1   322
STATUS              X    00208E       2   203  177  178  180  182
SVCICODE            H    00008A       2   302
SVCIID              F    000088       4   298
SVCIILC             X    000089       1   300
SVCIILCM            U    00000C       1   301
SVCNPSW             F    000060       8   285
SVCOPSW             F    000020       8   256  263
TIMER               F    000050       4   280
TTDES               F    000054       4   281
UA0                 F    000010       8   253
UA1                 F    00004C       4   278
UA2                 F    0000A4       4   324
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page    11

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

UA3                 F    0000B4       4   330
UA4                 X    0000B8       1   331
UA6                 X    0000EC       8   340
UNITERR             I    002080       4   195  181
WAIT                3    0020B8       8   216  168
ZMKFAILA            F    0000F8       8   342
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page    12

 MACRO     DEFN  REFERENCES

ARCHIND      69
ARCHLVL      68
ASAIPL      125
ASALOAD     113
ASAREA      243
DWAIT       214   222   224   226   228   230   232   234
DWAITEND    221
TRAP64      115   118
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page    13

   DESC     SYMBOL  SIZE    POS       ADDR

Entry: 0

Image      IMAGE     776  000-307  0000-0307
  Region   ASAREGN   512  000-1FF  0000-01FF
    CSECT  ASASECT   512  000-1FF  0000-01FF
  Region   HELLO     264  200-307  2000-2107
    CSECT  PGMSECT   264  200-307  2000-2107


 ADDR    POS                                OBJECT CONTENT                                         CHARACTER CONTENT


Region: ASAREGN

000000   000   00000000 00002000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000020   020   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000040   040   00000000 00000000 00000000 00000000  00000000 00000000 00020000 00000018   |................ ................|
000060   060   00020000 00000020 00020000 00000028  00020000 00000030 00020000 00000038   |................ ................|
000080   080   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0000A0   0A0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0000C0   0C0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0000E0   0E0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000100   100   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000120   120   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000140   140   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000160   160   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
000180   180   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0001A0   1A0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0001C0   1C0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|
0001E0   1E0   00000000 00000000 00000000 00000000  00000000 00000000 00000000 00000000   |................ ................|

Region: HELLO

002000   200   05C0D207 0000C0AE 4810C08A 9D001000  4740C06A 4720C06E 4710C072 D2070048   |..K............. . .¦...>....K...|
002020   220   C0869C00 10004740 C06A4720 C06E4710  C072D207 0078C0BE 8200C0B6 D2070078   |.f..... .¦...>.. ..K.....b...K...|
002040   240   C0C64910 003A4770 C076D601 C08C0044  9500C08D 4770C07A 91F3C08C 4770C07E   |.F........O..... n......:j3.....=|
002060   260   910CC08C 47E0C030 8200C0CE 8200C0D6  8200C0DE 8200C0E6 8200C0EE 8200C0F6   |j.......b...b..O b...b..Wb...b..6|
002080   280   8200C0FE 80000000 00002090 001F0000  09002098 00000017 C8859393 9640C281   |b............... ...q....Hello Ba|
0020A0   2A0   998560D4 85A38193 40E69699 93845A00  00020000 00010008 80020000 00000000   |re-Metal World!. ................|
0020C0   2C0   00000000 0000203C 00020000 00000038  00020000 00000000 00020000 00010004   |................ ................|
0020E0   2E0   00020000 00010008 00020000 0001000C  00020000 00010010 00020000 00010014   |................ ................|
002100   300   00020000 00010018                                                          |........                         |
ASMA Ver. 0.2.1  HELLO - HELLO WORLD WITH CONSOLE I/O                                               13 Sep 2021 15:36:46  Page    14

   STMT                   FILE NAME

1     /home/harold/simh/simh_tests/hello/hello.asm


** NO ERRORS FOUND **

[108] MNOTE *,ARCHLVL - ARCHITECTURE LEVEL SET - 1
